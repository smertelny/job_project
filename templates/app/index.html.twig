{% extends "base.html.twig" %}

{% if data['result'] is defined %}
    {% set data = data['result'] %}
{% endif %}

{% if yesturday_data['result'] is defined %}
    {% set yesturday_data = yesturday_data['result'] %}
{% endif %}

{% block body %}
<style>
    table {
        width: 50%;
        float: left;
    }
</style>
<a href="{{ path('log_index') }}">Logs</a>
<div style="background: #b2d8b2; border-radius:20px; padding: 20px">
<h2 style="color:green">Як користуватись сервісом?</h2>
<p style="color:green">
Для того, щоб фільтрувати по даті - запишіть після посилання ?date=дата,
де дата - це дата, на яку ви хочете дізнатись курс валюти
у форматі РРРР-ММ-ДД;
</p>
<p style="color:green">
Для фільтрації по валюті - впишіть ?currency=ВАЛ, де ВАЛ - 
це скорочений запис валют (шукайте всі доступні валюти нижче)
</p>
<p style="color:green">
Запити можна об'єднувати за допомогою значка &
Наприклад example.com?currency=usd&date=20181008
</p>
</div>
{% if data['error'] is defined %}
    <p style= "color:red">Сталась помилка: {{ data['error'] }}</p>
{% else %}
    {% if req['cur'] %}
        {% for i in data if i['cc']|lower == req['cur']|lower %}
            {{ i['txt'] }} -- {{ i['cc'] }} -- {{ i['rate'] }}
        {% else %}
            <p style="color:red;">Такої валюти не існує</p>
        {% endfor %}
    {% else %}
    <table>
        <caption>Your date</caption>
        <tr>
            <th>txt</th>
            <th>cc</th>
            <th>rate</th>
        </tr>
        {% for i in data %}
            <tr>
                <td>{{ i['txt'] }}</td>
                <td>{{ i['cc'] }}</td>
                <td>{{ i['rate'] }}</td>
            </tr>
        {% endfor %}
    </table>
    {% if yesturday_data is defined %}
    <table>
    <caption>Yesturday</caption>
         <tr>
            <th>txt</th>
            <th>cc</th>
            <th>rate</th>
        </tr>
        {% for i in yesturday_data %}
            <tr>
                <td>{{ i['txt'] }}</td>
                <td>{{ i['cc'] }}</td>
                <td>{{ i['rate'] }}</td>
            </tr>
        {% endfor %}
    </table>
    {% endif %}
    {% endif %}
{% endif %}
{% endblock body %}